{"version":3,"sources":["ac-html.component.ts"],"names":[],"mappings":"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","file":"ac-html.component.js","sourceRoot":"","sourcesContent":["import { Component, DoCheck, ElementRef, Input, OnDestroy, Renderer2 } from '@angular/core';\r\nimport { CesiumService } from '../../services/cesium/cesium.service';\r\n\r\n/**\r\n *  This is an html implementation.\r\n *  The ac-html element must be a child of ac-map element.\r\n *  __Usage:__\r\n *  ```\r\n *  <ac-html [props]=\"{position: position, show: true}\">;\r\n *    <p>html element</p>\r\n *  </ac-html>\r\n *  ```\r\n */\r\n\r\n\r\nexport class AcHtmlComponent implements DoCheck, OnDestroy {\r\n\r\n   props: any;\r\n  private isDraw = false;\r\n  preRenderEventListener: () => void;\r\n\r\n  constructor(private cesiumService: CesiumService, private elementRef: ElementRef, private renderer: Renderer2) {\r\n  }\r\n\r\n  setScreenPosition(screenPosition: any) {\r\n    if (screenPosition) {\r\n      this.renderer.setStyle(this.elementRef.nativeElement, 'top', `${screenPosition.y}px`);\r\n      this.renderer.setStyle(this.elementRef.nativeElement, 'left', `${screenPosition.x}px`);\r\n    }\r\n  }\r\n\r\n  remove() {\r\n    if (this.isDraw) {\r\n      this.isDraw = false;\r\n      this.cesiumService.getScene().preRender.removeEventListener(this.preRenderEventListener);\r\n      this.renderer.setStyle(this.elementRef.nativeElement, 'display', `none`);\r\n    }\r\n  }\r\n\r\n  add() {\r\n    if (!this.isDraw) {\r\n      this.isDraw = true;\r\n      this.preRenderEventListener = () => {\r\n        const screenPosition = Cesium.SceneTransforms.wgs84ToWindowCoordinates(this.cesiumService.getScene(),\r\n          this.props.position);\r\n        this.setScreenPosition(screenPosition);\r\n      };\r\n      this.renderer.setStyle(this.elementRef.nativeElement, 'display', `block`);\r\n      this.cesiumService.getScene().preRender.addEventListener(this.preRenderEventListener);\r\n    }\r\n  }\r\n\r\n  ngDoCheck() {\r\n    if (this.props.show === undefined || this.props.show) {\r\n      this.add();\r\n    }\r\n    else {\r\n      this.remove();\r\n    }\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n\t\tthis.remove();\r\n\t}\r\nstatic decorators: DecoratorInvocation[] = [\n{ type: Component, args: [{\r\n  selector: 'ac-html',\r\n  template: `<ng-content></ng-content>`,\r\n  styles: [`:host {\r\n                position: absolute;\r\n                z-index: 100;\r\n\t\t\t\t}`]\r\n}, ] },\n];\n/** @nocollapse */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n{type: CesiumService, },\n{type: ElementRef, },\n{type: Renderer2, },\n];\nstatic propDecorators: {[key: string]: DecoratorInvocation[]} = {\n'props': [{ type: Input },],\n};\n}\r\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"]}