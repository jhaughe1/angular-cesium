{"version":3,"sources":["ac-html-desc.component.ts"],"names":[],"mappings":"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","file":"ac-html-desc.component.js","sourceRoot":"","sourcesContent":["import { Component, ContentChild, OnInit, TemplateRef, ViewChild } from '@angular/core';\r\nimport { BasicDesc } from '../../services/basic-desc/basic-desc.service';\r\nimport { LayerService } from '../../services/layer-service/layer-service.service';\r\nimport { ComputationCache } from '../../services/computation-cache/computation-cache.service';\r\nimport { CesiumProperties } from '../../services/cesium-properties/cesium-properties.service';\r\nimport { HtmlDrawerService } from '../../services/drawers/html-drawer/html-drawer.service';\r\nimport { AcHtmlDirective } from '../../directives/ac-html/ac-html.directive';\r\nimport { AcHtmlManager } from '../../services/ac-html-manager/ac-html-manager.service';\r\n\r\n/**\r\n *  This is an html implementation.\r\n *  The ac-html element must be a child of ac-layer element.\r\n *  <br>\r\n *  [props] accepts position(Cartesian3) and show(boolean).\r\n *\r\n *  __Usage:__\r\n *  ```\r\n *  <ac-layer acFor=\"let html of htmls$\" [context]=\"this\">\r\n \t\t\t<ac-html-desc props=\"{position: html.position, show: html.show}\">\r\n \t\t\t\t<ng-template let-html>\r\n \t\t\t\t\t<div>\r\n\t\t\t\t\t <h1>This is ac-html {{html.name}}</h1>\r\n\t\t\t\t\t <button (click)=\"changeText(html, 'Test')\">change text</button>\r\n \t\t\t\t\t</div>\r\n \t\t\t\t</ng-template>\r\n \t\t\t</ac-html-desc>\r\n *  <ac-html [props]=\"{position: position, show: true}\">;\r\n *    <p>html element</p>\r\n *  </ac-html>\r\n *  ```\r\n */\r\n\r\nexport class AcHtmlDescComponent extends BasicDesc implements OnInit {\r\n\t\r\n\t acHtmlCreator: AcHtmlDirective;\r\n\t acHtmlTemplate: TemplateRef<any>;\r\n\t\r\n\tconstructor(htmlDrawer: HtmlDrawerService, layerService: LayerService,\r\n\t\t\t\t\t\t\tcomputationCache: ComputationCache, cesiumProperties: CesiumProperties) {\r\n\t\tsuper(htmlDrawer, layerService, computationCache, cesiumProperties);\r\n\t}\r\n\t\r\n\tngOnInit() {\r\n\t\tsuper.ngOnInit();\r\n\t\t\r\n\t\tif (!this.acHtmlCreator) {\r\n\t\t\tthrow new Error(`AcHtml desc ERROR: ac html directive not found.`);\r\n\t\t}\r\n\t\t\r\n\t\tif (!this.acHtmlTemplate) {\r\n\t\t\tthrow new Error(`AcHtml desc ERROR: html template not found.`);\r\n\t\t}\r\n\t}\r\n\t\r\n\tdraw(context: any, id: any): any {\r\n\t\tconst cesiumProps = this._propsEvaluator(context);\r\n\t\tif (!this._cesiumObjectsMap.has(id)) {\r\n\t\t\tconst primitive = this._drawer.add(cesiumProps);\r\n\t\t\tthis._cesiumObjectsMap.set(id, primitive);\r\n\t\t\tthis.acHtmlCreator.addOrUpdate(id, primitive);\r\n\t\t} else {\r\n\t\t\tconst primitive = this._cesiumObjectsMap.get(id);\r\n\t\t\tthis._drawer.update(primitive, cesiumProps);\r\n\t\t\tthis.acHtmlCreator.addOrUpdate(id, primitive);\r\n\t\t}\r\n\t}\r\n\t\r\n\tremove(id: string): void {\r\n\t\tconst primitive = this._cesiumObjectsMap.get(id);\r\n\t\tthis._drawer.remove(primitive);\r\n\t\tthis._cesiumObjectsMap.delete(id);\r\n\t\tthis.acHtmlCreator.remove(id, primitive);\r\n\t}\r\n\t\r\n\tremoveAll(): void {\r\n\t\tthis._cesiumObjectsMap.forEach(((primitive, id) => {\r\n\t\t\tthis.acHtmlCreator.remove(id, primitive);\r\n\t\t}));\r\n\t\tthis._cesiumObjectsMap.clear();\r\n\t\tthis._drawer.removeAll();\r\n\t}\r\nstatic decorators: DecoratorInvocation[] = [\n{ type: Component, args: [{\r\n\tselector : 'ac-html-desc',\r\n\tproviders : [AcHtmlManager],\r\n\ttemplate : `\r\n      <div *acHtml=\"let acHtmlEntityId = id; let acHtmlContext = context\">\r\n          <div [acHtmlContainer]=\"acHtmlEntityId\">\r\n              <ng-template [ngTemplateOutlet]=\"acHtmlTemplate\"\r\n                           [ngTemplateOutletContext]=\"acHtmlContext\"></ng-template>\r\n          </div>\r\n      </div>`\r\n}, ] },\n];\n/** @nocollapse */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n{type: HtmlDrawerService, },\n{type: LayerService, },\n{type: ComputationCache, },\n{type: CesiumProperties, },\n];\nstatic propDecorators: {[key: string]: DecoratorInvocation[]} = {\n'acHtmlCreator': [{ type: ViewChild, args: [AcHtmlDirective, ] },],\n'acHtmlTemplate': [{ type: ContentChild, args: [TemplateRef, ] },],\n};\n}\r\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"]}