{"version":3,"sources":["entity-on-map.component.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,KAAA,EAAmD,MAAO,eAAA,CAAgB;AAOnF;IAQC,8BAAsB,OAA2B,EAAU,SAA2B;QAAhE,YAAO,GAAP,OAAO,CAAoB;QAAU,cAAS,GAAT,SAAS,CAAkB;IACtF,CAAC;IAED,uCAAQ,GAAR;QACC,IAAI,CAAC,mBAAmB,GAAG,KAAK,CAAC;QACjC,IAAM,WAAW,GAAG,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC;QACxC,EAAE,CAAC,CAAC,WAAW,CAAC,CAAC,CAAC;YACjB,IAAI,CAAC,WAAW,GAAG,WAAW,CAAC;YAC/B,IAAI,CAAC,SAAS,CAAC,wBAAwB,CAAC,WAAW,EAAE,CAAC,CAAC,CAAC;QACzD,CAAC;QACD,IAAI,CAAC,SAAS,EAAE,CAAC;IAClB,CAAC;IAED,0CAAW,GAAX,UAAY,OAAsB;QACjC,IAAM,KAAK,GAAG,OAAO,CAAC,OAAO,CAAC,CAAC;QAC/B,EAAE,CAAC,CAAC,KAAK,CAAC,YAAY,KAAK,KAAK,CAAC,aAAa,CAAC,CAAC,CAAC;YAChD,IAAI,CAAC,WAAW,EAAE,CAAC;QACpB,CAAC;IACF,CAAC;IAED,wCAAS,GAAT;QACC,IAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC;QAChC,MAAM,CAAC,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;IAC1D,CAAC;IAED,4CAAa,GAAb;QACC,IAAI,CAAC,mBAAmB,GAAG,KAAK,CAAC;QACjC,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;IAChD,CAAC;IAED,0CAAW,GAAX;QACC,EAAE,CAAC,CAAC,IAAI,CAAC,mBAAmB,CAAC,CAAC,CAAC;YAC9B,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,aAAa,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC;QAC5D,CAAC;IACF,CAAC;IAED,0CAAW,GAAX;QACC,IAAI,CAAC,SAAS,CAAC,iBAAiB,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;QACnD,IAAI,CAAC,aAAa,EAAE,CAAC;IACtB,CAAC;IACK,mCAAc,GAA2C;QAChE,OAAO,EAAE,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,EAAE;KAC1B,CAAC;IACF,2BAAC;CAnDD,AAmDC,IAAA;SAnDY,oBAAoB","file":"entity-on-map.component.js","sourceRoot":"","sourcesContent":["import { Input, OnChanges, OnDestroy, OnInit, SimpleChanges } from '@angular/core';\r\nimport { BasicDrawerService } from '../drawers/basic-drawer/basic-drawer.service';\r\nimport { MapLayersService } from '../map-layers/map-layers.service';\r\n\r\n/**\r\n *  Extend this class to create drawing on map components.\r\n */\r\nexport class EntityOnMapComponent implements OnInit, OnChanges, OnDestroy {\r\n\t\r\n\tprops: any;\r\n\t\r\n\tprotected selfPrimitive: any;\r\n\tprotected selfPrimitiveIsDraw: boolean;\r\n\tprotected dataSources: any;\r\n\t\r\n\tconstructor(protected _drawer: BasicDrawerService, private mapLayers: MapLayersService) {\r\n\t}\r\n\t\r\n\tngOnInit(): void {\r\n\t\tthis.selfPrimitiveIsDraw = false;\r\n\t\tconst dataSources = this._drawer.init();\r\n\t\tif (dataSources) {\r\n\t\t\tthis.dataSources = dataSources;\r\n\t\t\tthis.mapLayers.registerLayerDataSources(dataSources, 0);\r\n\t\t}\r\n\t\tthis.drawOnMap();\r\n\t}\r\n\t\r\n\tngOnChanges(changes: SimpleChanges) {\r\n\t\tconst props = changes['props'];\r\n\t\tif (props.currentValue !== props.previousValue) {\r\n\t\t\tthis.updateOnMap();\r\n\t\t}\r\n\t}\r\n\t\r\n\tdrawOnMap() {\r\n\t\tthis.selfPrimitiveIsDraw = true;\r\n\t\treturn this.selfPrimitive = this._drawer.add(this.props);\r\n\t}\r\n\t\r\n\tremoveFromMap() {\r\n\t\tthis.selfPrimitiveIsDraw = false;\r\n\t\treturn this._drawer.remove(this.selfPrimitive);\r\n\t}\r\n\t\r\n\tupdateOnMap() {\r\n\t\tif (this.selfPrimitiveIsDraw) {\r\n\t\t\treturn this._drawer.update(this.selfPrimitive, this.props);\r\n\t\t}\r\n\t}\r\n\t\r\n\tngOnDestroy(): void {\r\n\t\tthis.mapLayers.removeDataSources(this.dataSources);\r\n\t\tthis.removeFromMap();\r\n\t}\r\nstatic propDecorators: {[key: string]: DecoratorInvocation[]} = {\n'props': [{ type: Input },],\n};\n}\r\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"]}