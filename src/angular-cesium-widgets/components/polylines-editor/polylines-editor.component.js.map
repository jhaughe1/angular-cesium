{"version":3,"sources":["polylines-editor.component.ts"],"names":[],"mappings":"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","file":"polylines-editor.component.js","sourceRoot":"","sourcesContent":["import { Component, OnDestroy, ViewChild } from '@angular/core';\r\nimport { EditModes } from '../../models/edit-mode.enum';\r\nimport { AcNotification } from '../../../angular-cesium/models/ac-notification';\r\nimport { EditActions } from '../../models/edit-actions.enum';\r\nimport { AcLayerComponent } from '../../../angular-cesium/components/ac-layer/ac-layer.component';\r\nimport { CoordinateConverter } from '../../../angular-cesium/services/coordinate-converter/coordinate-converter.service';\r\nimport { MapEventsManagerService } from '../../../angular-cesium/services/map-events-mananger/map-events-manager';\r\nimport { Subject } from 'rxjs/Subject';\r\nimport { CameraService } from '../../../angular-cesium/services/camera/camera.service';\r\nimport { EditPoint } from '../../models/edit-point';\r\nimport { PolylinesEditorService } from '../../services/entity-editors/polyline-editor/polylines-editor.service';\r\nimport { PolylinesManagerService } from '../../services/entity-editors/polyline-editor/polylines-manager.service';\r\nimport { PolylineEditUpdate } from '../../models/polyline-edit-update';\r\nimport { EditablePolyline } from '../../models/editable-polyline';\r\nimport { LabelProps } from '../../models/label-props';\r\n\r\n\r\nexport class PolylinesEditorComponent implements OnDestroy {\r\n\r\n  private editLabelsRenderFn: (update: PolylineEditUpdate, labels: LabelProps[]) => LabelProps[];\r\n  public Cesium = Cesium;\r\n  public editPoints$ = new Subject<AcNotification>();\r\n  public editPolylines$ = new Subject<AcNotification>();\r\n  public polylineLabels$ = new Subject<AcNotification>();\r\n\r\n   private editPointsLayer: AcLayerComponent;\r\n   private editPolylinesLayer: AcLayerComponent;\r\n   private polylineLabelsLayer: AcLayerComponent;\r\n\r\n  constructor(private polylinesEditor: PolylinesEditorService,\r\n              private coordinateConverter: CoordinateConverter,\r\n              private mapEventsManager: MapEventsManagerService,\r\n              private cameraService: CameraService,\r\n              private polylinesManager: PolylinesManagerService) {\r\n    this.polylinesEditor.init(this.mapEventsManager, this.coordinateConverter, this.cameraService, polylinesManager);\r\n    this.startListeningToEditorUpdates();\r\n  }\r\n\r\n  private startListeningToEditorUpdates() {\r\n    this.polylinesEditor.onUpdate().subscribe((update: PolylineEditUpdate) => {\r\n      if (update.editMode === EditModes.CREATE || update.editMode === EditModes.CREATE_OR_EDIT) {\r\n        this.handleCreateUpdates(update);\r\n      }\r\n      else if (update.editMode === EditModes.EDIT) {\r\n        this.handleEditUpdates(update);\r\n      }\r\n    });\r\n  }\r\n\r\n  getLabelId(element: any, index: number): string {\r\n    return index.toString();\r\n  }\r\n\r\n  renderEditLabels(polyline: EditablePolyline, update: PolylineEditUpdate, labels?: LabelProps[]) {\r\n    update.positions = polyline.getRealPositions();\r\n    update.points = polyline.getRealPoints();\r\n\r\n    if (labels) {\r\n      polyline.labels = labels;\r\n      this.polylineLabelsLayer.update(polyline, polyline.getId());\r\n      return;\r\n    }\r\n\r\n    if (!this.editLabelsRenderFn) {\r\n      return;\r\n    }\r\n\r\n    polyline.labels = this.editLabelsRenderFn(update, polyline.labels);\r\n    this.polylineLabelsLayer.update(polyline, polyline.getId());\r\n\r\n  }\r\n\r\n  removeEditLabels(polyline: EditablePolyline) {\r\n    polyline.labels = [];\r\n    this.polylineLabelsLayer.remove(polyline.getId());\r\n  }\r\n\r\n  handleCreateUpdates(update: PolylineEditUpdate) {\r\n    switch (update.editAction) {\r\n      case EditActions.INIT: {\r\n        this.polylinesManager.createEditablePolyline(\r\n          update.id,\r\n          this.editPointsLayer,\r\n          this.editPolylinesLayer,\r\n          this.coordinateConverter,\r\n          update.polylineOptions);\r\n        break;\r\n      }\r\n      case EditActions.MOUSE_MOVE: {\r\n        const polyline = this.polylinesManager.get(update.id);\r\n        if (update.updatedPosition) {\r\n          polyline.moveTempMovingPoint(update.updatedPosition);\r\n          this.renderEditLabels(polyline, update);\r\n        }\r\n        break;\r\n      }\r\n      case EditActions.ADD_POINT: {\r\n        const polyline = this.polylinesManager.get(update.id);\r\n        if (update.updatedPosition) {\r\n          polyline.addPoint(update.updatedPosition);\r\n          this.renderEditLabels(polyline, update);\r\n        }\r\n        break;\r\n      }\r\n      case EditActions.ADD_LAST_POINT: {\r\n        const polyline = this.polylinesManager.get(update.id);\r\n        if (update.updatedPosition) {\r\n          polyline.addLastPoint(update.updatedPosition);\r\n          this.renderEditLabels(polyline, update);\r\n        }\r\n        break;\r\n      }\r\n      case EditActions.DISPOSE: {\r\n        const polyline = this.polylinesManager.get(update.id);\r\n        polyline.dispose();\r\n        this.removeEditLabels(polyline);\r\n        this.editLabelsRenderFn = undefined;\r\n        break;\r\n      }\r\n      case EditActions.SET_EDIT_LABELS_RENDER_CALLBACK: {\r\n        const polyline = this.polylinesManager.get(update.id);\r\n        this.editLabelsRenderFn = update.labelsRenderFn;\r\n        this.renderEditLabels(polyline, update);\r\n        break;\r\n      }\r\n      case EditActions.UPDATE_EDIT_LABELS: {\r\n        const polyline = this.polylinesManager.get(update.id);\r\n        this.renderEditLabels(polyline, update, update.updateLabels);\r\n        break;\r\n      }\r\n      case EditActions.SET_MANUALLY: {\r\n        const polyline = this.polylinesManager.get(update.id);\r\n        this.renderEditLabels(polyline, update, update.updateLabels);\r\n        break;\r\n      }\r\n      default: {\r\n        return;\r\n      }\r\n    }\r\n  }\r\n\r\n  handleEditUpdates(update: PolylineEditUpdate) {\r\n    switch (update.editAction) {\r\n      case EditActions.INIT: {\r\n        this.polylinesManager.createEditablePolyline(\r\n          update.id,\r\n          this.editPointsLayer,\r\n          this.editPolylinesLayer,\r\n          this.coordinateConverter,\r\n          update.polylineOptions,\r\n          update.positions\r\n        );\r\n        break;\r\n      }\r\n      case EditActions.DRAG_POINT: {\r\n        const polyline = this.polylinesManager.get(update.id);\r\n        if (polyline && polyline.enableEdit) {\r\n          polyline.movePoint(update.updatedPosition, update.updatedPoint);\r\n          this.renderEditLabels(polyline, update);\r\n        }\r\n        break;\r\n      }\r\n      case EditActions.DRAG_POINT_FINISH: {\r\n        const polyline = this.polylinesManager.get(update.id);\r\n        if (polyline && polyline.enableEdit && update.updatedPoint.isVirtualEditPoint()) {\r\n          polyline.changeVirtualPointToRealPoint(update.updatedPoint);\r\n          this.renderEditLabels(polyline, update);\r\n        }\r\n        break;\r\n      }\r\n      case EditActions.REMOVE_POINT: {\r\n        const polyline = this.polylinesManager.get(update.id);\r\n        if (polyline && polyline.enableEdit) {\r\n          polyline.removePoint(update.updatedPoint);\r\n          this.renderEditLabels(polyline, update);\r\n        }\r\n        break;\r\n      }\r\n      case EditActions.DISABLE: {\r\n        const polyline = this.polylinesManager.get(update.id);\r\n        if (polyline) {\r\n          polyline.enableEdit = false;\r\n          this.renderEditLabels(polyline, update);\r\n        }\r\n        break;\r\n      }\r\n      case EditActions.ENABLE: {\r\n        const polyline = this.polylinesManager.get(update.id);\r\n        if (polyline) {\r\n          polyline.enableEdit = true;\r\n          this.renderEditLabels(polyline, update);\r\n        }\r\n        break;\r\n      }\r\n      case EditActions.DRAG_SHAPE: {\r\n        const polyline = this.polylinesManager.get(update.id);\r\n        if (polyline && polyline.enableEdit) {\r\n          polyline.moveShape(update.draggedPosition, update.updatedPosition)\r\n        }\r\n        break;\r\n      }\r\n\r\n      case EditActions.DRAG_SHAPE_FINISH: {\r\n        const polyline = this.polylinesManager.get(update.id);\r\n        if (polyline && polyline.enableEdit) {\r\n          polyline.endMoveShape();\r\n          this.renderEditLabels(polyline, update);\r\n        }\r\n        break;\r\n      }\r\n      default: {\r\n        return;\r\n      }\r\n    }\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.polylinesManager.clear();\r\n  }\r\n\r\n  getPointSize(point: EditPoint) {\r\n    return point.isVirtualEditPoint() ? point.props.virtualPointPixelSize : point.props.pixelSize;\r\n  }\r\n\r\n  getPointShow(point: EditPoint) {\r\n    return point.show && (point.isVirtualEditPoint() ? point.props.showVirtual : point.props.show);\r\n  }\r\nstatic decorators: DecoratorInvocation[] = [\n{ type: Component, args: [{\r\n  selector: 'polylines-editor',\r\n  templateUrl: './polylines-editor.component.html',\r\n  providers: [CoordinateConverter, PolylinesManagerService]\r\n}, ] },\n];\n/** @nocollapse */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n{type: PolylinesEditorService, },\n{type: CoordinateConverter, },\n{type: MapEventsManagerService, },\n{type: CameraService, },\n{type: PolylinesManagerService, },\n];\nstatic propDecorators: {[key: string]: DecoratorInvocation[]} = {\n'editPointsLayer': [{ type: ViewChild, args: ['editPointsLayer', ] },],\n'editPolylinesLayer': [{ type: ViewChild, args: ['editPolylinesLayer', ] },],\n'polylineLabelsLayer': [{ type: ViewChild, args: ['polylineLabelsLayer', ] },],\n};\n}\r\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"]}