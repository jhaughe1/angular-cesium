{"version":3,"sources":["circles-editor.component.ts"],"names":[],"mappings":"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","file":"circles-editor.component.js","sourceRoot":"","sourcesContent":["import { Component, OnDestroy, ViewChild } from '@angular/core';\r\nimport { EditModes } from '../../models/edit-mode.enum';\r\nimport { AcNotification } from '../../../angular-cesium/models/ac-notification';\r\nimport { EditActions } from '../../models/edit-actions.enum';\r\nimport { AcLayerComponent } from '../../../angular-cesium/components/ac-layer/ac-layer.component';\r\nimport { CoordinateConverter } from '../../../angular-cesium/services/coordinate-converter/coordinate-converter.service';\r\nimport { MapEventsManagerService } from '../../../angular-cesium/services/map-events-mananger/map-events-manager';\r\nimport { Subject } from 'rxjs/Subject';\r\nimport { CameraService } from '../../../angular-cesium/services/camera/camera.service';\r\nimport { EditPoint } from '../../models/edit-point';\r\nimport { CirclesManagerService } from '../../services/entity-editors/circles-editor/circles-manager.service';\r\nimport { CirclesEditorService } from '../../services/entity-editors/circles-editor/circles-editor.service';\r\nimport { CircleEditUpdate } from '../../models/circle-edit-update';\r\nimport { LabelProps } from '../../models/label-props';\r\nimport { EditableCircle } from '../../models/editable-circle';\r\n\r\n\r\nexport class CirclesEditorComponent implements OnDestroy {\r\n\r\n  private editLabelsRenderFn: (update: CircleEditUpdate, labels: LabelProps[]) => LabelProps[];\r\n  public Cesium = Cesium;\r\n  public editPoints$ = new Subject<AcNotification>();\r\n  public editCircles$ = new Subject<AcNotification>();\r\n  public editArcs$ = new Subject<AcNotification>();\r\n\r\n   private editCirclesLayer: AcLayerComponent;\r\n   private editArcsLayer: AcLayerComponent;\r\n   private editPointsLayer: AcLayerComponent;\r\n\r\n  constructor(private circlesEditor: CirclesEditorService,\r\n              private coordinateConverter: CoordinateConverter,\r\n              private mapEventsManager: MapEventsManagerService,\r\n              private cameraService: CameraService,\r\n              private circlesManager: CirclesManagerService) {\r\n    this.circlesEditor.init(this.mapEventsManager, this.coordinateConverter, this.cameraService, this.circlesManager);\r\n    this.startListeningToEditorUpdates();\r\n  }\r\n\r\n  private startListeningToEditorUpdates() {\r\n    this.circlesEditor.onUpdate().subscribe((update) => {\r\n      if (update.editMode === EditModes.CREATE || update.editMode === EditModes.CREATE_OR_EDIT) {\r\n        this.handleCreateUpdates(update);\r\n      }\r\n      else if (update.editMode === EditModes.EDIT) {\r\n        this.handleEditUpdates(update);\r\n      }\r\n    });\r\n  }\r\n\r\n  getLabelId(element: any, index: number): string {\r\n    return index.toString();\r\n  }\r\n\r\n  renderEditLabels(circle: EditableCircle, update: CircleEditUpdate, labels?: LabelProps[]) {\r\n    update.center = circle.getCenter();\r\n    update.radiusPoint = circle.getRadiusPoint();\r\n    update.radius = circle.getRadius();\r\n\r\n    if (labels) {\r\n      circle.labels = labels;\r\n      this.editCirclesLayer.update(circle, circle.getId());\r\n      return;\r\n    }\r\n\r\n    if (!this.editLabelsRenderFn) {\r\n      return;\r\n    }\r\n\r\n    circle.labels = this.editLabelsRenderFn(update, circle.labels);\r\n    this.editCirclesLayer.update(circle, circle.getId());\r\n\r\n  }\r\n\r\n  removeEditLabels(circle: EditableCircle) {\r\n    circle.labels = [];\r\n    this.editCirclesLayer.update(circle, circle.getId());\r\n  }\r\n\r\n  handleCreateUpdates(update: CircleEditUpdate) {\r\n    switch (update.editAction) {\r\n      case EditActions.INIT: {\r\n        this.circlesManager.createEditableCircle(\r\n          update.id,\r\n          this.editCirclesLayer,\r\n          this.editPointsLayer,\r\n          this.editArcsLayer,\r\n          update.circleOptions\r\n        );\r\n        break;\r\n      }\r\n      case EditActions.MOUSE_MOVE: {\r\n        const circle = this.circlesManager.get(update.id);\r\n        if (update.radiusPoint) {\r\n          circle.movePoint(update.radiusPoint);\r\n          this.renderEditLabels(circle, update);\r\n        }\r\n        break;\r\n      }\r\n      case EditActions.ADD_POINT: {\r\n        const circle = this.circlesManager.get(update.id);\r\n        if (update.center) {\r\n          circle.addPoint(update.center);\r\n          this.renderEditLabels(circle, update);\r\n        }\r\n        break;\r\n      }\r\n      case EditActions.ADD_LAST_POINT: {\r\n        const circle = this.circlesManager.get(update.id);\r\n        if (update.radiusPoint) {\r\n          circle.addLastPoint(update.radiusPoint);\r\n          this.renderEditLabels(circle, update);\r\n        }\r\n        break;\r\n      }\r\n      case EditActions.DISPOSE: {\r\n        const circle = this.circlesManager.get(update.id);\r\n        this.removeEditLabels(circle);\r\n        this.circlesManager.dispose(update.id);\r\n        break;\r\n      }\r\n      case EditActions.SET_EDIT_LABELS_RENDER_CALLBACK: {\r\n        const circle = this.circlesManager.get(update.id);\r\n        this.editLabelsRenderFn = update.labelsRenderFn;\r\n        this.renderEditLabels(circle, update);\r\n        break;\r\n      }\r\n      case EditActions.UPDATE_EDIT_LABELS: {\r\n        const circle = this.circlesManager.get(update.id);\r\n        this.renderEditLabels(circle, update, update.updateLabels);\r\n        break;\r\n      }\r\n      case EditActions.SET_MANUALLY: {\r\n        const circle = this.circlesManager.get(update.id);\r\n        this.renderEditLabels(circle, update, update.updateLabels);\r\n        break;\r\n      }\r\n      default: {\r\n        return;\r\n      }\r\n    }\r\n  }\r\n\r\n  handleEditUpdates(update: CircleEditUpdate) {\r\n    switch (update.editAction) {\r\n      case EditActions.INIT: {\r\n        const circle = this.circlesManager.createEditableCircle(\r\n          update.id,\r\n          this.editCirclesLayer,\r\n          this.editPointsLayer,\r\n          this.editArcsLayer,\r\n          update.circleOptions\r\n        );\r\n        circle.setManually(update.center, update.radiusPoint);\r\n        break;\r\n      }\r\n      case EditActions.DRAG_POINT_FINISH:\r\n      case EditActions.DRAG_POINT: {\r\n        const circle = this.circlesManager.get(update.id);\r\n        if (circle && circle.enableEdit) {\r\n          circle.movePoint(update.endDragPosition);\r\n          this.renderEditLabels(circle, update);\r\n        }\r\n        break;\r\n      }\r\n      case EditActions.DRAG_SHAPE: {\r\n        const circle = this.circlesManager.get(update.id);\r\n        if (circle && circle.enableEdit) {\r\n          circle.moveCircle(update.startDragPosition, update.endDragPosition);\r\n        }\r\n        break;\r\n      }\r\n      case EditActions.DRAG_SHAPE_FINISH: {\r\n        const circle = this.circlesManager.get(update.id);\r\n        if (circle && circle.enableEdit) {\r\n          circle.endMovePolygon();\r\n          this.renderEditLabels(circle, update);\r\n        }\r\n        break;\r\n      }\r\n      case EditActions.DISABLE: {\r\n        const circle = this.circlesManager.get(update.id);\r\n        if (circle) {\r\n          circle.enableEdit = false;\r\n          this.renderEditLabels(circle, update);\r\n        }\r\n        break;\r\n      }\r\n      case EditActions.ENABLE: {\r\n        const circle = this.circlesManager.get(update.id);\r\n        if (circle) {\r\n          circle.enableEdit = true;\r\n          this.renderEditLabels(circle, update);\r\n        }\r\n        break;\r\n      }\r\n      default: {\r\n        return;\r\n      }\r\n    }\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.circlesManager.clear();\r\n  }\r\n\r\n  getPointSize(point: EditPoint) {\r\n    return point.isVirtualEditPoint() ? point.props.virtualPointPixelSize : point.props.pixelSize;\r\n  }\r\n\r\n  getPointShow(point: EditPoint) {\r\n    return point.show && (point.isVirtualEditPoint() ? point.props.showVirtual : point.props.show);\r\n  }\r\nstatic decorators: DecoratorInvocation[] = [\n{ type: Component, args: [{\r\n  selector: 'circles-editor',\r\n  templateUrl: './circles-editor.component.html',\r\n  providers: [CoordinateConverter, CirclesManagerService]\r\n}, ] },\n];\n/** @nocollapse */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n{type: CirclesEditorService, },\n{type: CoordinateConverter, },\n{type: MapEventsManagerService, },\n{type: CameraService, },\n{type: CirclesManagerService, },\n];\nstatic propDecorators: {[key: string]: DecoratorInvocation[]} = {\n'editCirclesLayer': [{ type: ViewChild, args: ['editCirclesLayer', ] },],\n'editArcsLayer': [{ type: ViewChild, args: ['editArcsLayer', ] },],\n'editPointsLayer': [{ type: ViewChild, args: ['editPointsLayer', ] },],\n};\n}\r\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"]}