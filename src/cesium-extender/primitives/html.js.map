{"version":3,"sources":["html.ts"],"names":[],"mappings":"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","file":"html.js","sourceRoot":"","sourcesContent":["import { HtmlCollection } from '../collections';\r\nimport { Cartesian2 } from '../../angular-cesium/models/cartesian2';\r\nimport { Cartesian3 } from '../../angular-cesium/models/cartesian3';\r\n\r\nexport class HtmlPrimitive {\r\n\r\n    private _scene: any;\r\n    private _show: boolean;\r\n    private _position: Cartesian3;\r\n    private _lastPosition: Cartesian2;\r\n    private _pixelOffset: Cartesian2;\r\n    private _element: HTMLElement;\r\n    private _collection: HtmlCollection;\r\n\r\n    constructor(options: any, collection: HtmlCollection = null) {\r\n        if (typeof options !== 'object') {\r\n            throw new Error('HtmlPrimitive ERROR: invalid html options!');\r\n        }\r\n\r\n        this.scene = options.scene;\r\n        this.show = options.show || true;\r\n        this.position = options.position;\r\n        this.pixelOffset = options.pixelOffset;\r\n        this.element = options.element;\r\n        this.collection = collection;\r\n    }\r\n\r\n    set scene(scene: any) {\r\n        this._scene = scene;\r\n    }\r\n\r\n    set show(show: boolean) {\r\n        this._show = show;\r\n\r\n        if (Cesium.defined(this.element)) {\r\n            if (show) {\r\n                this._element.style.display = 'block';\r\n            }\r\n            else {\r\n                this._element.style.display = 'none';\r\n            }\r\n        }\r\n    }\r\n\r\n    get show(): boolean {\r\n        return this._show;\r\n    }\r\n\r\n    set position(position: Cartesian3) {\r\n        this._position = position;\r\n    }\r\n\r\n    get position(): Cartesian3 {\r\n        return this._position;\r\n    }\r\n\r\n    set pixelOffset(pixelOffset: Cartesian2) {\r\n        this._pixelOffset = pixelOffset;\r\n    }\r\n\r\n    get pixelOffset(): Cartesian2 {\r\n        return this._pixelOffset;\r\n    }\r\n\r\n    set element(element: HTMLElement) {\r\n        this._element = element;\r\n\r\n        if (Cesium.defined(element)) {\r\n            this._element.style.position = 'absolute';\r\n            this._element.style.zIndex = Number.MAX_VALUE.toString();\r\n        }\r\n    }\r\n\r\n    get element(): HTMLElement {\r\n        return this._element;\r\n    }\r\n\r\n    set collection(collection: HtmlCollection) {\r\n        this._collection = collection;\r\n    }\r\n\r\n    get collection() {\r\n        return this._collection;\r\n    }\r\n\r\n    update() {\r\n        if (!Cesium.defined(this._show) || !Cesium.defined(this._element)) {\r\n            return;\r\n        }\r\n\r\n        let screenPosition = Cesium.SceneTransforms.wgs84ToWindowCoordinates(this._scene, this._position);\r\n\r\n        if (!Cesium.defined(screenPosition)) {\r\n            screenPosition = new Cesium.Cartesian2((-1000), (-1000));\r\n        }\r\n        else if (Cesium.defined(this._pixelOffset) && Cesium.defined(this._pixelOffset.x) && Cesium.defined(this._pixelOffset.y)) {\r\n            screenPosition.y += this._pixelOffset.y;\r\n            screenPosition.x += this._pixelOffset.x;\r\n        }\r\n\r\n        if (this._lastPosition && this._lastPosition.equals(screenPosition)) {\r\n            return;\r\n        }\r\n\r\n        this._element.style.top = `${screenPosition.y}px`;\r\n        this._element.style.left = `${screenPosition.x}px`;\r\n        this._lastPosition = screenPosition;\r\n    }\r\n}\r\n"]}